import{jsx as e,jsxs as i}from"react/jsx-runtime";import*as k from"react";import{useState as L,useEffect as B}from"react";import{useRouteContext as U}from"@fastify/react/client";import{c as $,B as d}from"./button-Ba17NLzu.js";import{B as j,C as v,a as T}from"./card-DOJf39UL.js";import*as _ from"@radix-ui/react-separator";import{ArrowLeft as I,Tag as z,User as F,Calendar as H,Clock as P,Twitter as V,Facebook as Y,Linkedin as G,Copy as Q,ChevronLeft as X,ChevronRight as q}from"lucide-react";import{b as m}from"./blogData-CYzjZmc9.js";import{Link as h}from"react-router";import"@radix-ui/react-slot";import"class-variance-authority";import"clsx";import"tailwind-merge";const O=k.forwardRef(({className:t,orientation:s="horizontal",decorative:n=!0,...r},l)=>e(_.Root,{ref:l,decorative:n,orientation:s,className:$("shrink-0 bg-border",s==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));O.displayName=_.Root.displayName;const J=1,K=1e6;let y=0;function W(){return y=(y+1)%Number.MAX_SAFE_INTEGER,y.toString()}const S=new Map,R=t=>{if(S.has(t))return;const s=setTimeout(()=>{S.delete(t),u({type:"REMOVE_TOAST",toastId:t})},K);S.set(t,s)},Z=(t,s)=>{switch(s.type){case"ADD_TOAST":return{...t,toasts:[s.toast,...t.toasts].slice(0,J)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===s.toast.id?{...n,...s.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=s;return n?R(n):t.toasts.forEach(r=>R(r.id)),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return s.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==s.toastId)};default:return t}},x=[];let N={toasts:[]};function u(t){N=Z(N,t),x.forEach(s=>{s(N)})}function ee(t){const s=W(),n=l=>u({type:"UPDATE_TOAST",toast:{...l,id:s}}),r=()=>u({type:"DISMISS_TOAST",toastId:s});return u({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:l=>{l||r()}}}),{id:s,dismiss:r,update:n}}function te(){const[t,s]=k.useState(N);return k.useEffect(()=>(x.push(s),()=>{const n=x.indexOf(s);n>-1&&x.splice(n,1)}),[]),{...t,toast:ee,dismiss:n=>u({type:"DISMISS_TOAST",toastId:n})}}function pe({req:t}){return{slug:t.params.slug}}function fe(){const{data:t}=U(),{slug:s}=t,{toast:n}=te(),[r,l]=L(0),o=m.find(a=>a.slug===s),p=m.findIndex(a=>a.slug===s),w=p>0?m[p-1]:null,b=p<m.length-1?m[p+1]:null,A=o?m.filter(a=>a.id!==o.id&&a.tags.some(c=>o.tags.includes(c))).slice(0,3):[];if(B(()=>{const a=()=>{const c=window.scrollY,E=document.documentElement.scrollHeight-window.innerHeight,M=c/E*100;l(Math.min(100,Math.max(0,M)))};return window.addEventListener("scroll",a),()=>window.removeEventListener("scroll",a)},[]),!o)return e("div",{className:"min-h-screen bg-background pt-20 flex items-center justify-center",children:i("div",{className:"text-center",children:[e("div",{className:"text-6xl mb-4",children:"ðŸ“„"}),e("h1",{className:"text-3xl font-bold mb-4",children:"Article Not Found"}),e("p",{className:"text-muted-foreground mb-6",children:"The article you're looking for doesn't exist or has been moved."}),e(h,{to:"/blog",children:i(d,{children:[e(I,{className:"mr-2 h-4 w-4"}),"Back to Blog"]})})]})});const C=a=>new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),f=typeof window<"u"?window.location.href:"",D=o.title,g=async a=>{const c={twitter:`https://twitter.com/intent/tweet?text=${encodeURIComponent(D)}&url=${encodeURIComponent(f)}`,facebook:`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(f)}`,linkedin:`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(f)}`};if(a==="copy")try{await navigator.clipboard.writeText(f),n({title:"Link copied!",description:"The article link has been copied to your clipboard."})}catch{n({title:"Failed to copy",description:"Please copy the link manually.",variant:"destructive"})}else window.open(c[a],"_blank","width=600,height=400")};return i("div",{className:"min-h-screen bg-background",children:[e("div",{className:"fixed top-0 left-0 w-full h-1 bg-muted z-50",children:e("div",{className:"h-full bg-primary transition-all duration-150 ease-out",style:{width:`${r}%`}})}),e("div",{className:"pt-20 container mx-auto px-4 sm:px-6 lg:px-8 py-12",children:i("div",{className:"max-w-4xl mx-auto",children:[e(h,{to:"/blog",children:i(d,{variant:"ghost",className:"mb-8 hover:bg-accent",children:[e(I,{className:"mr-2 h-4 w-4"}),"Back to Blog"]})}),i("header",{className:"mb-12",children:[i("div",{className:"mb-6",children:[e("div",{className:"flex flex-wrap gap-2 mb-4",children:o.tags.map((a,c)=>i(j,{variant:"secondary",children:[e(z,{className:"h-3 w-3 mr-1"}),a]},c))}),e("h1",{className:"text-4xl sm:text-5xl font-bold mb-6 leading-tight",children:o.title}),e("p",{className:"text-xl text-muted-foreground mb-8 leading-relaxed",children:o.excerpt})]}),i("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8",children:[i("div",{className:"flex items-center gap-6 text-sm text-muted-foreground",children:[i("div",{className:"flex items-center gap-2",children:[e(F,{className:"h-4 w-4"}),o.author]}),i("div",{className:"flex items-center gap-2",children:[e(H,{className:"h-4 w-4"}),C(o.publishedAt)]}),i("div",{className:"flex items-center gap-2",children:[e(P,{className:"h-4 w-4"}),o.readTime," min read"]})]}),i("div",{className:"flex items-center gap-2",children:[e(d,{variant:"outline",size:"sm",onClick:()=>g("twitter"),children:e(V,{className:"h-4 w-4"})}),e(d,{variant:"outline",size:"sm",onClick:()=>g("facebook"),children:e(Y,{className:"h-4 w-4"})}),e(d,{variant:"outline",size:"sm",onClick:()=>g("linkedin"),children:e(G,{className:"h-4 w-4"})}),e(d,{variant:"outline",size:"sm",onClick:()=>g("copy"),children:e(Q,{className:"h-4 w-4"})})]})]}),e("div",{className:"relative overflow-hidden rounded-lg mb-12",children:e("img",{src:o.image,alt:o.title,className:"w-full h-64 sm:h-96 object-cover"})})]}),e("article",{className:"prose prose-lg max-w-none mb-12",children:e("div",{dangerouslySetInnerHTML:{__html:o.content.replace(/\n/g,"<br>")}})}),e(O,{className:"my-12"}),i("div",{className:"grid md:grid-cols-2 gap-6 mb-12",children:[w&&e(v,{className:"hover:shadow-lg transition-shadow",children:i(T,{className:"p-6",children:[i("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-2",children:[e(X,{className:"h-4 w-4"}),"Previous Article"]}),e(h,{to:`/blog/${w.slug}`,className:"block hover:text-primary transition-colors",children:e("h3",{className:"font-semibold line-clamp-2",children:w.title})})]})}),b&&e(v,{className:"hover:shadow-lg transition-shadow",children:i(T,{className:"p-6",children:[i("div",{className:"flex items-center justify-end gap-2 text-sm text-muted-foreground mb-2",children:["Next Article",e(q,{className:"h-4 w-4"})]}),e(h,{to:`/blog/${b.slug}`,className:"block hover:text-primary transition-colors text-right",children:e("h3",{className:"font-semibold line-clamp-2",children:b.title})})]})})]}),A.length>0&&i("section",{children:[e("h2",{className:"text-2xl font-bold mb-8",children:"Related Articles"}),e("div",{className:"grid md:grid-cols-3 gap-6",children:A.map(a=>i(v,{className:"hover:shadow-lg transition-shadow",children:[e("div",{className:"relative overflow-hidden",children:e("img",{src:a.image,alt:a.title,className:"w-full h-32 object-cover"})}),i(T,{className:"p-4",children:[i("div",{className:"text-xs text-muted-foreground mb-2",children:[C(a.publishedAt)," â€¢"," ",a.readTime," min read"]}),e(h,{to:`/blog/${a.slug}`,children:e("h3",{className:"font-semibold line-clamp-2 hover:text-primary transition-colors",children:a.title})}),e("p",{className:"text-sm text-muted-foreground mt-2 line-clamp-2",children:a.excerpt})]})]},a.id))})]})]})})]})}export{fe as default,pe as getData};
